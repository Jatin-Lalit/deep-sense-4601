<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Country Finder</title>
    <style>
     #all_countries{
      display: grid;
      grid-template-columns: repeat(1,1fr);
      gap:50px;
     }
     #all_countries>div>img{
      width:50%;
     }
     #all_countries>div{
      box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
      text-align: center;
     }
    </style>
  </head>
  <body>
    <select oninput="(sorting())" id="sort_population">
      <option value="">Sort By price</option>
      <option value="asc">ASC</option>
      <option value="desc">DESC</option>
    </select>
    <input onchange="find()" id="filter_region"> 
     
   
    <div id="all_countries">
      <!-- Append Country Cards here  -->
    </div>
  </body>
  <script>
   let bag=[];
   var url=" https://fakestoreapi.com/products ";
   fetch(url)
   .then((res)=>res.json())
   .then((data)=>{
    bag=data;
    displayCard(data);
   });
   function sorting(){
    let ao=document.querySelector("#sort_population").value;
    if(ao=="desc"){
      bag.sort((a,b)=>b.price-a.price)
    }if(ao=="asc"){
      bag.sort((a,b)=>a.price-b.price)
    }
    console.log(bag)
    displayCard(bag)
   }
   sorting()

 function find(){
  let fin=document.querySelector("#filter_region").value;
  var f=bag.filter((elem)=>{
    return elem.title.toLowerCase().includes(fin.toLowerCase());
  });
  console.log(f);
  displayCard(f);

  }
  console.log(find)
  
 
   

   function displayCard(data){
    document.querySelector("#all_countries").innerHTML="";
    data.forEach(function(elem){
      let div=document.createElement("div");
      let image=document.createElement("img");
    image.setAttribute("src",elem.image)
    let name=document.createElement("h3");
name.innerText=elem.name.title
      let popu=document.createElement("p");
popu.innerText=elem.description
      let reg=document.createElement("p");
reg.innerText=elem.price
      let cap=document.createElement("p");
      cap.innerText=elem.rating.rate
      div.append(image,name,popu,reg,cap);
      document.querySelector("#all_countries").append(div);



    });
   }
  </script>
</html>
